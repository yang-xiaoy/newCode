# 1. 项目目录规划

---

## 1. admin

1. admin后台管理系统。
2. 使用vue框架搭建。



## 2. server

1. 后台管理系统代码实现。

2. 使用node.js语言，express框架。

   

## 3. web

1. web企业门户网站。
2. 使用vue框架搭建。



# 2. admin深入分析

----

## 1. 创建项目

1.  使用vue框架创建项目。

```js
create vue admin   
```

2. 清除admin目录文件中不需要的文件。

## 2. 路由分析

1. 嵌套的子路由是根据用户全选访问的，不是刚开始什么地方都可以去，那样就乱套了。
2. 使用router.addRoute()函数添加子路由。
3. 但是router.addRoute()方法一次只能添加一个路由，如果有10个或者8个路由，那么就要调用10次或8次，addRoute()函数，会造成路由代码冗余的问题。



`解决方案：`

1. 定义一个路由配置文件 config.js 配置文件。

```js
const Home = () => import('@/views/home/Home')
const Center = () => import('@/views/center/Center')
const UserAdd = () => import('@/views/user/UserAdd')
const UserList = () => import('@/views/user/UserList')
const NotFound = () => import('@/views/notfound/NotFound')

const routerConfig = [
  {
    path: '/',
    redirect: '/index'
  },
  {
    path: '/index',
    component: Home
  },
  {
    path: '/center',
    component: Center
  },
  {
    path: '/user/useradd',
    component: UserAdd
  },
  {
    path: '/user/userlist',
    component: UserList
  },
  {
    path: '/:pathMatch(.*)*',
    name: 'NotFound',
    component: NotFound
  }
]
export default routerConfig
```

2. router.js 全局路由配置文件。

```js
import { createRouter, createWebHistory } from 'vue-router'
import RouterConfig from './config'
import store from '@/store/index'

const Login = () => import('@/views/Login')
const MainBox = () => import('@/views/MainBox')

const routes = [
  {
    path: '/login',
    name: 'login',
    component: Login
  },
  {
    path: '/mainbox',
    name: 'mainbox',
    component: MainBox
  },
]

const router = createRouter({
  history: createWebHistory(process.env.BASE_URL),
  routes
})

/**
 * beforeEach()在路由跳转之前
 *  to:
 *  from:
 *  next()
 */
router.beforeEach((to,from,next)=>{
  if(to.name === 'login'){
    next()
  }else{
    // 如果授权(已经登录过了) next()
    // 未授权，重定向到login
    if(!localStorage.getItem("token")){
      next({
        path:'/login'
      })
    }else{
      if(!store.state.isGetterRouter){
        configRouter()
        next({
          path:to.fullPath
        })
      }else{
        next()
      }
    }
  }
})

/**
 * 定义遍历路由函数
 */
const configRouter = () =>{
  // 遍历子路由（config.js文件中配置的子路由） 
  RouterConfig.forEach(item => {
    // 使用router.addRoute()方法，添加子路由给mainbox组件
    router.addRoute('mainbox',item)
  });
}

// 改变 isGetterRouter 值为true
store.commit("changeGetterRouter",true)
export default router
```



## 3. element-plus

1. 安装element-plus插件

```js

```

2. 注册插件

```js

```

## 4. 粒子动画

> 给登录页面加粒子动画。

1. particles.vue3 粒子库安装。

```js
npm install --save particles.vue3 
// 注意：tsparticles 一定要安装的，今天在使用的时候没有安装导致只有背景，没有动画效果，因为刚开始以为这个是使用（tyscript的时候使用的）。
npm install --save tsparticles 
```

2. 注册组件：main.js中注册。

```js
import Particles from "particles.vue3";
createApp(App).use(Particles);
```

3. 使用 particles.vue3 粒子库。

```html
<!-- 1. template 模板中 -->
<template>
	<div>
		<Particles id="tsparticles" :particlesInit="particlesInit" :particlesLoaded="particlesLoaded" :options="particles" />
	</div>
</template>
```

```js
// 2. 引入粒子动画（存放在script标签对立面的）
import { loadFull } from "tsparticles"
// 将粒子动画抽离出去了，避免文件的冗余
import { particles } from "../components/particles/particles.js"

// 3. 粒子动画（从文档上复制的，一定需要引入的）
const particlesInit = async engine => {
  await loadFull(engine)
}
const particlesLoaded = async container => {
  console.log("Particles container loaded", container)
}
```

```js
// 3. 抽离的 particles.js 文件
export const particles = {
  background: {                 // 背景颜色
    color: {
        value: '#2d3a4b'
    }
  },
  fpsLimit: 20,
  interactivity: {
    events: {
        onClick: {              // 点击是否添加，默认为true，改成false 
            enable: false,
            mode: 'push'
        },
        onHover: {
            enable: true,
            mode: 'repulse'
        },
        resize: true
    },
    modes: {
      bubble: {
          distance: 400,
          duration: 2,
          opacity: 0.8,
          size: 40
      },
      push: {
          quantity: 4
      },
      repulse: {
          distance: 200,
          duration: 0.4
      }
    }
  },
  particles: {
    color: {
        value: '#ffffff'        // 动画连接"点"的颜色
    },
    links: {                    // 动画链接"线"的颜色
        color: '#ffffff',
        distance: 150,
        enable: true,
        opacity: 0.5,
        width: 1
    },
    collisions: {
        enable: true
    },
    move: {
      direction: 'none',
      enable: true,
      outModes: {
          default: 'bounce'
      },
      random: false,
      speed: 3,                 // 动画快慢，数值越大越快
      straight: false
    },
    number: {
      density: {
          enable: true,
          area: 800
      },
      value: 80
    },
    opacity: {
        value: 0.5
    },
    shape: {
        type: 'circle'
    },
    size: {
        value: { min: 1, max: 3 },
    }
  },
  detectRetina: true
}
```

## 5. 页面持久化

> 解释：就是当我点击"个人中心"，刷新页面后，还是显示的个人中心。

1. 持久化插件的安装

```js
npm install --save vuex-persistedstate
```

2. 注册持久化插件

```js
// 2.1.store里面的index.js中引入
import createPersistedState from 'vuex-persistedstate'

// 2.2.使用持久化插件
export default createStore({
  state: {  
    // menu 菜单是否折叠，默认为false，不折叠
    isCollapsed: false,       
  },
  getters: {
  },
  mutations: {
  },
  actions: {
  },
  modules: {
  },
  // vuex持久化插件
  plugins: [createPersistedState({
    // paths控制是否持久化，在paths里面的是需要持久化的
    paths:['isCollapsed']
  })] 
})
```

